 //@version=5
indicator("Test",overlay= true)

//Comman Variables
var rowId=1
var colId=1
var textColor=color.white

//Function to Get color value
GetBGColor(x)=>x>=0?color.green:color.red

//EMA Calculation
ema10 = ta.ema(close, 10)
ema21 = ta.ema(close, 21)
ema50 = ta.ema(close, 50)

ema10_Percentate=(close-ema10)/ema10
ema21_Percentate=(close-ema21)/ema21
ema50_Percentate=(close-ema50)/ema50

if barstate.islast
    var dashboard= table.new("top_right",2,10)
    table.cell(dashboard,0,0," ")//Leaving first row for panel controls
    table.cell(dashboard,0,1,"Dashboard",text_color = textColor,bgcolor = color.gray)
    table.merge_cells(dashboard,0,1,1,2)
    table.cell(dashboard,0,3,"EMA 10",text_color = textColor,bgcolor = color.black)
    table.cell(dashboard,0,4,"EMA 21",text_color = textColor,bgcolor = color.black)
    table.cell(dashboard,0,5,"EMA 50",text_color = textColor,bgcolor = color.black)

    table.cell(dashboard,1,3, str.tostring(ema10_Percentate,"0.00%"),text_color = textColor,bgcolor = GetBGColor(ema10_Percentate))
    table.cell(dashboard,1,4,str.tostring(ema21_Percentate,"0.00%"),text_color = textColor,bgcolor = GetBGColor(ema21_Percentate))
    table.cell(dashboard,1,5,str.tostring(ema50_Percentate,"0.00%"),text_color = textColor,bgcolor = GetBGColor(ema50_Percentate))