// This Pine Script™ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © vkpunique

//@version=5

// @description TODO: add library description here
library("PineHelper", overlay=true)

//// Commanly Used fuctions for active Script™

//@function To check if current script is index or not
export method IsIndex(string symbolType=syminfo.type)=>
    symbolType=="index"

export method IsStock(string symbolType=syminfo.type)=>
    symbolType=="stock"

////Functions for value formatting

export method ToNoDecimal(float value)=>
    str.tostring(value,"0")

export method ToOneDecimal(float value)=>
    str.tostring(value,"0.0")

export method ToTwoDecimal(float value)=>
    str.tostring(value,"0.00")

export method ToPercentage(float value)=>
    str.tostring(value,"0.00%")

export method ToCrore(float value)=>
    value==0?"-":str.tostring(value/10000000,"0")+" Cr"

// @function Get Background Color Using 0,1 input
// @returns Color Type
export GetBGColor2(int value) =>
	switch value
		1=>color.green
		0=>color.red
		=>color(na)

// @function Get Background Color Using 0,1,-1 input
// @returns Color Type
export GetBGColor3(int value) =>
	switch value
		1=>color.green
		0=>color(na)
		-1=>color.red
		=>color(na)

export method GetBGColor(float x,float lowEnd,float lowEdge,float perfect,float normal, float highEdge)=>
    if x<lowEnd
        color.red
    else if x<lowEdge
        color.orange
    else if x<perfect
        color.green
    else if x<normal
        color(na)
    else if x<highEdge
        color.orange
    else
        color.red

//// Math/Chart Calculations

export method RatioCrore(float value)=>
    value/10000000

export method Percentage(float currentValue, float baseValue)=>
	(currentValue-baseValue)/baseValue

export method GetChartHighest(series float dataSeries = high) =>
    var chartHighest = dataSeries
    if dataSeries > nz(chartHighest, -1e10)
        chartHighest := dataSeries
    chartHighest

export method GetEMA(int length)=>
	ta.ema(close,length)

//Table Util
export method VerticleCell(table tbl, int colId,string cellTitle,string cellText,color backgroundcolor)=>
    table.cell(tbl,colId,0,cellTitle,text_color = color.white,bgcolor = color.black)
    table.cell(tbl,colId,1,cellText,text_color = color.white,bgcolor = backgroundcolor)

export method VerticleCell(table tbl,int rowId, int colId,string cellTitle,string cellText,color backgroundcolor)=>
    table.cell(tbl,colId,rowId,cellTitle,text_color = color.white,bgcolor = color.black)
    table.cell(tbl,colId,rowId+1,cellText,text_color = color.white,bgcolor = backgroundcolor)
